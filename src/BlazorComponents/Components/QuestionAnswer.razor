@using BlazorShared.Models

<MudGrid>
  
        @if(AnswerType is ShortTextDto singleAnswer)
        {
           <MudItem xs="12">
                <MudTextField T="string" Label=""  @bind-Value="@singleAnswer.Answer" @onchange="OnChange" Margin="Margin.Dense"/>
           </MudItem>
        }

    @if (AnswerType is MultipleChoiceDto multipleChoiceAnswer)
    {
        <MudItem xs="3">
                <MudSelect T="string" Label="@Question" AnchorOrigin="Origin.BottomCenter" @bind-Text="@multipleChoiceAnswer.Answer" @bind-Value="@multipleChoiceAnswer.Answer">
                    @foreach (var item in multipleChoiceAnswer.Choices)
                    {
                        <MudSelectItem Value="@item.Key" />
                    }
                </MudSelect>
         </MudItem>
    }

           @if(AnswerType is YesNoAnswerDto yesNoAnswer)
        {
            <MudItem xs="3">
                    <MudField Label="@Question" Variant="Variant.Text" InnerPadding = "false" DisableUnderLine = "true">
                        <MudRadioGroup T="YesNoEnum" @bind-SelectedOption="@yesNoAnswer.Answer" @onchange="OnChange">
                            <MudRadio Option="YesNoEnum.Yes" Color="Color.Primary">Yes </MudRadio>
                             <MudRadio Option="YesNoEnum.No" Color="Color.Primary">No</MudRadio>
                        </MudRadioGroup>
                    </MudField>
            </MudItem>
        }

        @if(AnswerType is EvaluationDto criteriaAnswer)
        {
            <MudItem xs="3">
                  <MudSelect T="Assessment" Label="@Question" AnchorOrigin="Origin.BottomCenter"   @bind-Value="@criteriaAnswer.SelfAssessment">
                      <MudSelectItem T="Assessment"  Value="Assessment.NotApplicable"/>
                      <MudSelectItem T="Assessment"  Value="Assessment.DoNotComply"/>
                      <MudSelectItem T="Assessment"  Value="Assessment.PartiallyComply"/>
                      <MudSelectItem T="Assessment"  Value="Assessment.FullyComply"/>
                </MudSelect>
            </MudItem>
        }

<MudItem xs="2">













 </MudItem>
 <MudItem xs="10">
     <MudTextField T="string" Label="Answer/Notes" Variant="Variant.Outlined" @bind-Value="@AnswerType.AnswerMotivation" Lines="1" />
 </MudItem>
 </MudGrid>
 @*<MudDivider DividerType="DividerType.Middle" Class="my-1"/>*@
@code {

    [Parameter]
    public string Question { get; set; }

    [Parameter]
    public AnswerFormatDto AnswerType { get; set; }



     [Parameter] public EventCallback<object> ValueChanged { get; set; }

        async void OnChange(ChangeEventArgs e)
    {
       await ValueChanged.InvokeAsync(e.Value);
    }




}
